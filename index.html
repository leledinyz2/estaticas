<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéµ Placar Just Dance do Lele üéµ</title>

<style>
body {
  font-family: "Poppins", sans-serif;
  background: #0d0d0d;
  color: #f4f4f4;
  margin: 0;
  padding: 0;
}
header {
  background: #b30a3c;
  text-align: center;
  padding: 20px;
  font-size: 1.6rem;
  font-weight: 600;
  color: white;
  border-radius: 0 0 10px 10px;
}
.container {
  max-width: 900px;
  margin: 30px auto;
  padding: 20px;
  background: #111;
  border-radius: 10px;
  box-shadow: 0 4px 20px rgba(255,255,255,0.05);
}
.controls {
  display: flex;
  justify-content: space-between;
  flex-wrap: wrap;
  margin-bottom: 10px;
}
select, input {
  padding: 6px 10px;
  border-radius: 5px;
  border: 1px solid #444;
  background: #222;
  color: #fff;
  font-size: 0.9rem;
}
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 10px;
}
th, td {
  padding: 10px;
  border-bottom: 1px solid #333;
  text-align: left;
}
th {
  color: #ff88b3;
  cursor: pointer;
}
tr:hover {
  background: #1b1b1b;
}
footer {
  text-align: center;
  color: #999;
  margin-top: 20px;
  font-size: 0.85rem;
}
.estrela {
  color: #ffcc00;
}
</style>
</head>
<body>

<header>üéµ Placar Just Dance do Lele üéµ</header>

<div class="container">
  <div class="controls">
    <div>
      <label>Filtrar por estrelas m√≠nimas:</label>
      <select id="filtroEstrelas">
        <option value="0">Todas</option>
        <option value="1">1+</option>
        <option value="2">2+</option>
        <option value="3">3+</option>
        <option value="4">4+</option>
        <option value="5">5</option>
      </select>
    </div>
    <div>
      <label>Buscar m√∫sica:</label>
      <input type="text" id="buscaMusica" placeholder="Digite o nome...">
    </div>
  </div>

  <table id="tabela">
    <thead>
      <tr>
        <th data-col="M√∫sica">M√∫sica ‚¨ç</th>
        <th data-col="Vers√£o">Vers√£o</th>
        <th data-col="Pontua√ß√£o">Pontua√ß√£o</th>
        <th data-col="Estrelas">Estrelas</th>
        <th data-col="Jogo">Jogo</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <footer>Atualiza automaticamente com base na planilha do Lele üíÉ</footer>
</div>

<script>
// === CONFIGURA√á√ÉO ===
const SHEET_ID = "1TOt_BQWDaxWpXrSaetedM65ClizLm5ptV0tohhqS03Y"; // seu ID do Sheets
const GID = "0"; // n√∫mero da aba
const CSV_URL = `https://docs.google.com/spreadsheets/d/e/2PACX-1vTas34kcpM1cQdW2oR_XjNlINTVShbwfTyVdYnBe2glvdvlJbcDlbQ0npgTdJZ_6p-tQgozmHmnsCQy/pub?gid=0&single=true&output=csv`;

// === FUN√á√ÉO PARA LER CSV ===
async function carregarDados() {
  const res = await fetch(CSV_URL);
  const text = await res.text();
  const linhas = text.split("\n").map(l => l.split(","));
  const cabecalho = linhas[0];
  const dados = linhas.slice(1).map(linha => {
    const obj = {};
    cabecalho.forEach((col, i) => obj[col.trim()] = linha[i]?.replace(/['"]+/g,'').trim());
    return obj;
  });
  return dados.filter(d => d["M√∫sica"]);
}

// === GERAR TABELA ===
function exibirTabela(dados) {
  const corpo = document.querySelector("#tabela tbody");
  corpo.innerHTML = "";
  dados.forEach(d => {
    const tr = document.createElement("tr");
    const estrelasNum = parseInt(d.Estrelas || "0");
    const estrelasHTML = "üíõ".repeat(estrelasNum);
    tr.innerHTML = `
      <td>"${d["M√∫sica"] || ""}"</td>
      <td>${d["Vers√£o"] || ""}</td>
      <td>${d["Pontua√ß√£o"] || ""}</td>
      <td>${estrelasHTML}</td>
      <td>${d["Jogo"] || ""}</td>
    `;
    corpo.appendChild(tr);
  });
}

// === FILTROS E BUSCA ===
function aplicarFiltros() {
  const minEstrelas = parseInt(document.querySelector("#filtroEstrelas").value);
  const busca = document.querySelector("#buscaMusica").value.toLowerCase();
  const filtrado = todos.filter(d => {
    const e = parseInt(d.Estrelas || "0");
    const nome = (d["M√∫sica"] || "").toLowerCase();
    return e >= minEstrelas && nome.includes(busca);
  });
  exibirTabela(filtrado);
}

// === INICIALIZA√á√ÉO ===
let todos = [];
carregarDados().then(dados => {
  todos = dados;
  exibirTabela(dados);
});

document.querySelector("#filtroEstrelas").addEventListener("change", aplicarFiltros);
document.querySelector("#buscaMusica").addEventListener("input", aplicarFiltros);
</script>

</body>
</html>
